(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__4sfAd"}},13:function(e,t,a){e.exports={Button:"Button_Button__1etmf"}},14:function(e,t,a){e.exports={backdrop:"Modal_backdrop__1NWgg",Modal:"Modal_Modal__3dDsq"}},22:function(e,t,a){},23:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(6),o=a.n(c),i=(a(22),a(3)),s=(a(23),a(5)),u=a.n(s),l=a(0);function b(e){var t=e.onSubmit;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("header",{className:u.a.Searchbar,children:Object(l.jsxs)("form",{onSubmit:t,name:"search",className:u.a.SearchForm,children:[Object(l.jsx)("input",{type:"text",name:"search",className:u.a.SearchForm_input,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"}),Object(l.jsx)("button",{type:"submit",className:u.a.SearchForm_button})]})})})}var m=a(9),j=a(10),h=a(11),d=a(17),f=a(16),g=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.webformatURL,a=e.tags,r=e.largeImageURL,n=e.openModal;return Object(l.jsx)("li",{className:g.ImageGalleryItem,children:Object(l.jsx)("a",{children:Object(l.jsx)("img",{onClick:n,src:t,alt:a,"data-big_image":r,className:g.ImageGalleryItem_image})})},t)}}]),a}(r.Component),O=a(12),p=a.n(O),_=a(13),v=a.n(_);function x(e){var t=e.onClick;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("button",{type:"button",className:v.a.Button,onClick:t,children:"Load more"})})}var S=a(14),w=a.n(S),y=document.querySelector("#modal-root");function k(e){var t=e.url,a=e.closeModal;return Object(r.useEffect)((function(){return window.addEventListener("click",a),window.addEventListener("keydown",a),function(){window.removeEventListener("click",a),window.removeEventListener("keydown",a)}}),[]),Object(c.createPortal)(Object(l.jsx)("div",{className:w.a.backdrop,children:Object(l.jsx)("img",{src:t,alt:""})}),y)}var F={fetchImg:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("21885958-186cb9f8de90f78c5ca194f62","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()}))}};function I(e){var t=e.search,a=e.hideLoader,n=Object(r.useState)(1),c=Object(i.a)(n,2),o=c[0],s=c[1],u=Object(r.useState)(""),b=Object(i.a)(u,2),j=b[0],h=b[1],d=Object(r.useState)(!1),f=Object(i.a)(d,2),O=f[0],_=f[1],v=Object(r.useState)([]),S=Object(i.a)(v,2),w=S[0],y=S[1],I=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},L=function(e){"IMG"===e.target.nodeName&&(_(!0),h(e.target.dataset.big_image))};Object(r.useEffect)((function(){var e=document.querySelector("ul");return e.addEventListener("click",L),function(){e.removeEventListener("click",L)}}),[]),Object(r.useEffect)((function(){1,y([]),E()}),[t]);var E=function(){var e="\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u043c\u0443 \u0441\u043b\u043e\u0432\u0443 ".concat(t," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");return F.fetchImg(t,o).then((function(t){return 0===t.hits.length?Promise.reject(new Error(e)):y((function(e){return[].concat(Object(m.a)(e),Object(m.a)(t.hits))}))})).catch((function(e){return alert(e.message)})).finally((function(){a()}))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:Object(l.jsx)("ul",{className:p.a.ImageGallery,children:w.map((function(e){var r=e.webformatURL,n=e.tags,c=e.largeImageURL;return Object(l.jsx)(g,{webformatURL:r,tags:n,largeImageURL:c,openModal:function(e){return L(e)},hideLoader:a,search:t,setPage:s,page:o,scroll:I},r)}))})}),Object(l.jsx)(x,{onClick:function(){return s((function(e){return e+1}))}}),O&&Object(l.jsx)(k,{url:j,closeModal:function(e){return function(e){"DIV"!==e.target.nodeName&&"Escape"!==e.code||_(!1)}(e)}})]})}var L=a(15),E=a.n(L);function N(){return Object(l.jsx)("div",{children:Object(l.jsx)(E.a,{type:"ThreeDots",color:"#18166b",height:80,width:80})})}function M(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),o=Object(i.a)(c,2),s=o[0],u=o[1],m=""===a;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{children:[Object(l.jsx)(b,{onSubmit:function(e){var t=e.target[0].value;u(!0),e.preventDefault(),""!==t.trim()?(n(t),e.target[0].value=""):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a")}}),s&&Object(l.jsx)(N,{}),!m&&Object(l.jsx)(I,{search:a,hideLoader:function(){u(!1)}})]})})}o.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1D1RX",SearchForm:"Searchbar_SearchForm__3G_ul",SearchForm_button:"Searchbar_SearchForm_button__TXqCT","SearchForm_button-label":"Searchbar_SearchForm_button-label__vHg0s",SearchForm_input:"Searchbar_SearchForm_input__dDbKp"}}},[[45,1,2]]]);
//# sourceMappingURL=main.0d4749c5.chunk.js.map